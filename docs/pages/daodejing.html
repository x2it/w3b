<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã€Šé“å¾·ç»ã€‹å¸›ä¹¦æœ¬ç ”è¯»å¹³å° - Daviçš„æ€è€ƒç¬”è®°</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@300;400;500;600;700&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #8B4513;
            --secondary-color: #D2691E;
            --dark-color: #2C1810;
            --light-color: #FDF6E3;
            --text-primary: #3E2723;
            --text-secondary: #5D4037;
            --text-light: #795548;
            --border-color: #D7CCC8;
            --highlight-bg: #FFF8E1;
            --note-bg: #F3E5F5;
            --reading-bg: #FAF0E6;
            --shadow-light: 0 4px 12px rgba(139, 69, 19, 0.08);
            --shadow-medium: 0 8px 24px rgba(139, 69, 19, 0.12);
        }
        
        * { 
            margin: 0; 
            padding: 0; 
            box-sizing: border-box; 
        }
        
        html { 
            scroll-behavior: smooth; 
            font-size: 16px; 
        }
        
        body {
            font-family: 'Noto Serif SC', serif;
            line-height: 1.8;
            color: var(--text-primary);
            background-color: var(--reading-bg);
            max-width: 1400px;
            margin: 0 auto;
            padding: 0;
            position: relative;
            min-height: 100vh;
            background-image: 
                radial-gradient(circle at 5% 10%, rgba(139, 69, 19, 0.03) 0%, transparent 20%),
                radial-gradient(circle at 95% 90%, rgba(44, 24, 16, 0.03) 0%, transparent 20%);
        }
        
        /* ================================ */
        /* é¡¶éƒ¨ç ”è¯»å·¥å…·æ  */
        /* ================================ */
        .reading-toolbar {
            position: sticky;
            top: 0;
            z-index: 100;
            background: rgba(253, 246, 227, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border-color);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: var(--shadow-light);
        }
        
        .toolbar-left, .toolbar-right {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }
        
        .site-brand {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--primary-color);
            text-decoration: none;
        }
        
        .tool-btn {
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 0.6rem 1.2rem;
            font-family: 'Noto Serif SC', serif;
            font-size: 0.95rem;
            color: var(--text-secondary);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s ease;
        }
        
        .tool-btn:hover {
            background: var(--highlight-bg);
            border-color: var(--secondary-color);
            color: var(--primary-color);
            transform: translateY(-2px);
            box-shadow: var(--shadow-light);
        }
        
        .font-controls {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .font-btn {
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 50%;
            border: 1px solid var(--border-color);
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s ease;
        }
        
        .font-btn:hover {
            background: var(--highlight-bg);
            border-color: var(--secondary-color);
        }
        
        /* ================================ */
        /* ä¸»ç ”è¯»åŒºåŸŸ */
        /* ================================ */
        .reading-container {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 2rem;
            padding: 2rem;
            min-height: calc(100vh - 80px);
        }
        
        @media (max-width: 1100px) {
            .reading-container {
                grid-template-columns: 1fr;
            }
        }
        
        /* ç»å…¸å†…å®¹åŒº */
        .classic-content {
            background: white;
            border-radius: 16px;
            padding: 3rem;
            box-shadow: var(--shadow-medium);
            border: 1px solid var(--border-color);
            position: relative;
            overflow: hidden;
        }
        
        .classic-content::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
        }
        
        /* ç« èŠ‚å¯¼èˆªå¤´ */
        .chapter-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2.5rem;
            padding-bottom: 1.5rem;
            border-bottom: 2px solid var(--border-color);
        }
        
        .chapter-title {
            font-size: 2.2rem;
            color: var(--dark-color);
            font-weight: 600;
            letter-spacing: 1px;
        }
        
        .chapter-nav-btns {
            display: flex;
            gap: 1rem;
        }
        
        .nav-btn {
            width: 3rem;
            height: 3rem;
            border-radius: 50%;
            border: 1px solid var(--border-color);
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }
        
        .nav-btn:hover {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
            transform: scale(1.1);
        }
        
        /* åŸæ–‡å±•ç¤ºåŒº */
        .original-text-container {
            position: relative;
            margin-bottom: 2.5rem;
        }
        
        .original-text {
            font-size: 1.4rem;
            line-height: 2.2;
            color: var(--text-primary);
            text-align: justify;
            padding: 2rem;
            background: var(--light-color);
            border-radius: 12px;
            border-left: 5px solid var(--primary-color);
            position: relative;
            transition: all 0.3s ease;
        }
        
        /* æ³¨éŸ³åŠŸèƒ½ */
        .phonetic-hover {
            position: relative;
            cursor: help;
            border-bottom: 1px dotted var(--text-light);
        }
        
        .phonetic-tooltip {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: var(--dark-color);
            color: white;
            padding: 0.5rem 0.8rem;
            border-radius: 6px;
            font-size: 0.9rem;
            white-space: nowrap;
            z-index: 10;
            opacity: 0;
            visibility: hidden;
            transition: all 0.2s ease;
            pointer-events: none;
        }
        
        .phonetic-hover:hover .phonetic-tooltip {
            opacity: 1;
            visibility: visible;
            bottom: calc(100% + 8px);
        }
        
        /* é‡Šä¹‰ä¸ç ”è¯»åŒº */
        .study-section {
            margin-top: 3rem;
            border-top: 1px solid var(--border-color);
            padding-top: 2rem;
        }
        
        .section-title {
            font-size: 1.5rem;
            color: var(--primary-color);
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }
        
        .section-title i {
            font-size: 1.3rem;
        }
        
        /* é‡Šä¹‰ç½‘æ ¼ */
        .meaning-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .meaning-card {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }
        
        .meaning-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-medium);
            border-color: var(--secondary-color);
        }
        
        .meaning-title {
            font-size: 1.1rem;
            color: var(--primary-color);
            margin-bottom: 0.8rem;
            font-weight: 600;
        }
        
        /* æœ—è¯»èŠ‚å¥ */
        .rhythm-box {
            background: linear-gradient(135deg, #FFF8E1, #FFECB3);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            border: 1px solid #FFD54F;
        }
        
        .rhythm-text {
            font-size: 1.2rem;
            line-height: 2;
            color: var(--text-secondary);
            white-space: pre-wrap;
            font-family: 'Noto Serif SC', monospace;
        }
        
        .rhythm-mark {
            color: var(--primary-color);
            font-weight: bold;
            margin: 0 0.2rem;
        }
        
        /* ç ”è¯»ç¬”è®°åŒº */
        .notes-section {
            background: var(--note-bg);
            border-radius: 12px;
            padding: 2rem;
            margin-top: 2rem;
            border: 1px solid #E1BEE7;
        }
        
        .notes-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        
        .notes-textarea {
            width: 100%;
            min-height: 150px;
            padding: 1.2rem;
            border: 1px solid #CE93D8;
            border-radius: 8px;
            font-family: 'Noto Serif SC', serif;
            font-size: 1rem;
            line-height: 1.6;
            resize: vertical;
            background: white;
            transition: border-color 0.3s;
        }
        
        .notes-textarea:focus {
            outline: none;
            border-color: var(--primary-color);
        }
        
        /* ================================ */
        /* ä¾§è¾¹ç ”è¯»è¾…åŠ©åŒº */
        /* ================================ */
        .study-sidebar {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }
        
        .sidebar-card {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }
        
        .sidebar-title {
            font-size: 1.3rem;
            color: var(--dark-color);
            margin-bottom: 1.5rem;
            padding-bottom: 0.8rem;
            border-bottom: 2px solid var(--border-color);
            font-weight: 600;
        }
        
        /* ç« èŠ‚å¯¼èˆª */
        .chapters-list {
            max-height: 500px;
            overflow-y: auto;
            padding-right: 0.5rem;
        }
        
        .chapters-list::-webkit-scrollbar {
            width: 6px;
        }
        
        .chapters-list::-webkit-scrollbar-track {
            background: #F5F5F5;
            border-radius: 4px;
        }
        
        .chapters-list::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 4px;
        }
        
        .chapter-item {
            padding: 1rem;
            margin-bottom: 0.8rem;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .chapter-item:hover {
            background: var(--highlight-bg);
            border-left-color: var(--secondary-color);
            transform: translateX(5px);
        }
        
        .chapter-item.active {
            background: linear-gradient(90deg, rgba(139, 69, 19, 0.1), rgba(210, 105, 30, 0.05));
            border-left-color: var(--primary-color);
            font-weight: 600;
            color: var(--primary-color);
        }
        
        .chapter-number {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 50%;
            background: var(--light-color);
            color: var(--text-secondary);
            font-size: 0.9rem;
            font-weight: 600;
        }
        
        .active .chapter-number {
            background: var(--primary-color);
            color: white;
        }
        
        /* ç ”è¯»å·¥å…· */
        .study-tools-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }
        
        .tool-card {
            background: var(--light-color);
            border-radius: 10px;
            padding: 1.2rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid transparent;
        }
        
        .tool-card:hover {
            background: white;
            border-color: var(--secondary-color);
            transform: translateY(-5px);
            box-shadow: var(--shadow-light);
        }
        
        .tool-icon {
            font-size: 1.8rem;
            color: var(--primary-color);
            margin-bottom: 0.8rem;
        }
        
        .tool-name {
            font-size: 0.95rem;
            color: var(--text-secondary);
            font-weight: 500;
        }
        
        /* ç‰ˆæœ¬ä¿¡æ¯ */
        .version-info {
            font-size: 0.9rem;
            color: var(--text-light);
            line-height: 1.6;
        }
        
        .version-info p {
            margin-bottom: 0.8rem;
        }
        
        .source-badge {
            display: inline-block;
            background: var(--primary-color);
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            margin-top: 0.5rem;
        }
        
        /* ================================ */
        /* åº•éƒ¨å¯¼èˆª */
        /* ================================ */
        .study-footer {
            text-align: center;
            padding: 2.5rem 2rem;
            color: var(--text-light);
            background: linear-gradient(to bottom, white, var(--light-color));
            border-top: 1px solid var(--border-color);
            margin-top: 3rem;
        }
        
        .footer-quote {
            font-size: 1.1rem;
            font-style: italic;
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            line-height: 1.8;
        }
        
        .footer-nav {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin: 2rem 0;
            flex-wrap: wrap;
        }
        
        .footer-link {
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 1rem;
            transition: all 0.3s ease;
            padding: 0.5rem 1rem;
            border-radius: 8px;
        }
        
        .footer-link:hover {
            color: var(--primary-color);
            background: rgba(139, 69, 19, 0.05);
        }
        
        .copyright {
            font-size: 0.9rem;
            opacity: 0.8;
            margin-top: 1.5rem;
        }
        
        /* ================================ */
        /* å“åº”å¼è°ƒæ•´ */
        /* ================================ */
        @media (max-width: 768px) {
            .reading-toolbar {
                padding: 1rem;
                flex-direction: column;
                gap: 1rem;
            }
            
            .toolbar-left, .toolbar-right {
                width: 100%;
                justify-content: space-between;
            }
            
            .reading-container {
                padding: 1rem;
            }
            
            .classic-content {
                padding: 2rem 1.5rem;
            }
            
            .chapter-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 1.5rem;
            }
            
            .chapter-title {
                font-size: 1.8rem;
            }
            
            .original-text {
                font-size: 1.2rem;
                line-height: 2;
                padding: 1.5rem;
            }
            
            .meaning-grid {
                grid-template-columns: 1fr;
            }
            
            .study-tools-grid {
                grid-template-columns: 1fr;
            }
            
            .footer-nav {
                gap: 1rem;
            }
        }
        
        /* ================================ */
        /* é˜…è¯»æ¨¡å¼åˆ‡æ¢ */
        /* ================================ */
        .reading-mode-classic {
            font-family: 'Noto Serif SC', serif;
            background: var(--reading-bg);
        }
        
        .reading-mode-modern {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f8f9fa;
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
        }
        
        .reading-mode-night {
            background: #1a1a2e;
            color: #e6e6e6;
            --text-primary: #e6e6e6;
            --text-secondary: #b3b3cc;
            --light-color: #16213e;
            --border-color: #2d3748;
        }
        
        /* ================================ */
        /* å­—ä½“å¤§å°æ§åˆ¶ */
        /* ================================ */
        .font-size-small .original-text {
            font-size: 1.1rem;
            line-height: 1.8;
        }
        
        .font-size-medium .original-text {
            font-size: 1.4rem;
            line-height: 2.2;
        }
        
        .font-size-large .original-text {
            font-size: 1.8rem;
            line-height: 2.5;
        }
        
        /* ================================ */
        /* åŠ¨ç”»æ•ˆæœ */
        /* ================================ */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .fade-in {
            animation: fadeInUp 0.6s ease forwards;
        }
        
        /* é«˜äº®æ ‡è®° */
        .highlight {
            background-color: rgba(255, 235, 59, 0.3);
            padding: 0 0.2rem;
            border-radius: 3px;
            transition: background-color 0.3s;
        }
        
        /* èšç„¦æ•ˆæœ */
        .focus-mode .original-text {
            background: linear-gradient(90deg, #FFFDE7, #FFF8E1);
            box-shadow: 0 0 30px rgba(139, 69, 19, 0.1);
        }
    </style>
</head>
<body class="reading-mode-classic font-size-medium">
    <!-- é¡¶éƒ¨ç ”è¯»å·¥å…·æ  -->
    <div class="reading-toolbar">
        <div class="toolbar-left">
            <a href="index.html" class="site-brand">
                <i class="fas fa-book-open"></i>
                <span>ã€Šé“å¾·ç»ã€‹ç ”è¯»å¹³å°</span>
            </a>
            
            <div class="font-controls">
                <button class="font-btn" onclick="changeFontSize('small')" title="å°å­—å·">A</button>
                <button class="font-btn" onclick="changeFontSize('medium')" title="ä¸­å­—å·">A</button>
                <button class="font-btn" onclick="changeFontSize('large')" title="å¤§å­—å·">A</button>
            </div>
            
            <button class="tool-btn" onclick="togglePhonetic()">
                <i class="fas fa-language"></i>
                <span>æ³¨éŸ³æ˜¾ç¤º</span>
            </button>
            
            <button class="tool-btn" onclick="toggleFocusMode()">
                <i class="fas fa-eye"></i>
                <span>ä¸“æ³¨æ¨¡å¼</span>
            </button>
        </div>
        
        <div class="toolbar-right">
            <button class="tool-btn" onclick="changeReadingMode('classic')">
                <i class="fas fa-scroll"></i>
                <span>å¤å…¸æ¨¡å¼</span>
            </button>
            
            <button class="tool-btn" onclick="changeReadingMode('modern')">
                <i class="fas fa-desktop"></i>
                <span>ç°ä»£æ¨¡å¼</span>
            </button>
            
            <button class="tool-btn" onclick="changeReadingMode('night')">
                <i class="fas fa-moon"></i>
                <span>å¤œé—´æ¨¡å¼</span>
            </button>
            
            <button class="tool-btn" onclick="printPage()">
                <i class="fas fa-print"></i>
                <span>æ‰“å°æœ¬ç« </span>
            </button>
        </div>
    </div>
    
    <!-- ä¸»ç ”è¯»åŒºåŸŸ -->
    <div class="reading-container">
        <!-- ç»å…¸å†…å®¹åŒº -->
        <main class="classic-content fade-in">
            <!-- ç« èŠ‚å¯¼èˆªå¤´ -->
            <div class="chapter-header">
                <h1 class="chapter-title" id="chapter-title">ç¬¬ä¸€ç« </h1>
                
                <div class="chapter-nav-btns">
                    <button class="nav-btn" onclick="prevChapter()" title="ä¸Šä¸€ç« ">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <button class="nav-btn" onclick="nextChapter()" title="ä¸‹ä¸€ç« ">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </div>
            
            <!-- åŸæ–‡å±•ç¤ºåŒº -->
            <div class="original-text-container">
                <div class="original-text" id="original-text">
                    é“å¯é“ä¹Ÿï¼Œéæ’é“ä¹Ÿã€‚åå¯åä¹Ÿï¼Œéæ’åä¹Ÿã€‚æ— åï¼Œä¸‡ç‰©ä¹‹å§‹ä¹Ÿï¼›æœ‰åï¼Œä¸‡ç‰©ä¹‹æ¯ä¹Ÿã€‚æ•…æ’æ— æ¬²ä¹Ÿï¼Œä»¥è§‚å…¶å¦™ï¼›æ’æœ‰æ¬²ä¹Ÿï¼Œä»¥è§‚å…¶æ‰€å¾¼ã€‚ä¸¤è€…åŒå‡ºï¼Œå¼‚ååŒè°“ã€‚ç„ä¹‹åˆç„ï¼Œä¼—å¦™ä¹‹é—¨ã€‚
                </div>
            </div>
            
            <!-- é‡Šä¹‰ä¸ç ”è¯»åŒº -->
            <div class="study-section">
                <h2 class="section-title">
                    <i class="fas fa-lightbulb"></i>
                    æœ¬ç« æ ¸å¿ƒé‡Šä¹‰
                </h2>
                
                <div class="meaning-grid" id="meaning-content">
                    <!-- åŠ¨æ€ç”Ÿæˆé‡Šä¹‰å†…å®¹ -->
                </div>
                
                <h2 class="section-title">
                    <i class="fas fa-music"></i>
                    æœ—è¯»èŠ‚å¥æŒ‡å¯¼
                </h2>
                
                <div class="rhythm-box">
                    <div class="rhythm-text" id="rhythm-text">
                        é“å¯é“ä¹Ÿï¼Œ<span class="rhythm-mark">/</span>éæ’é“ä¹Ÿã€‚<span class="rhythm-mark">//</span>
                        åå¯åä¹Ÿï¼Œ<span class="rhythm-mark">/</span>éæ’åä¹Ÿã€‚<span class="rhythm-mark">//</span>
                        æ— åï¼Œ<span class="rhythm-mark">/</span>ä¸‡ç‰©ä¹‹å§‹ä¹Ÿï¼›<span class="rhythm-mark">/</span>æœ‰åï¼Œ<span class="rhythm-mark">/</span>ä¸‡ç‰©ä¹‹æ¯ä¹Ÿã€‚<span class="rhythm-mark">//</span>
                        æ•…æ’æ— æ¬²ä¹Ÿï¼Œ<span class="rhythm-mark">/</span>ä»¥è§‚å…¶å¦™ï¼›<span class="rhythm-mark">/</span>æ’æœ‰æ¬²ä¹Ÿï¼Œ<span class="rhythm-mark">/</span>ä»¥è§‚å…¶æ‰€å¾¼ã€‚<span class="rhythm-mark">//</span>
                        ä¸¤è€…åŒå‡ºï¼Œ<span class="rhythm-mark">/</span>å¼‚ååŒè°“ã€‚<span class="rhythm-mark">//</span>
                        ç„ä¹‹åˆç„ï¼Œ<span class="rhythm-mark">/</span>ä¼—å¦™ä¹‹é—¨ã€‚
                    </div>
                </div>
                
                <h2 class="section-title">
                    <i class="fas fa-edit"></i>
                    ç ”è¯»ç¬”è®°
                </h2>
                
                <div class="notes-section">
                    <div class="notes-header">
                        <h3>æœ¬ç« ä¸ªäººæ„Ÿæ‚Ÿ</h3>
                        <button class="tool-btn" onclick="saveNotes()">
                            <i class="fas fa-save"></i>
                            ä¿å­˜ç¬”è®°
                        </button>
                    </div>
                    
                    <textarea class="notes-textarea" id="notes-textarea" placeholder="è®°å½•æ‚¨å¯¹æœ¬ç« çš„ç†è§£ã€æ„Ÿæ‚Ÿæˆ–ç–‘é—®..."></textarea>
                    
                    <div style="margin-top: 1rem; font-size: 0.9rem; color: var(--text-light);">
                        <i class="fas fa-info-circle"></i> ç¬”è®°å°†è‡ªåŠ¨ä¿å­˜åˆ°æœ¬åœ°æµè§ˆå™¨ä¸­
                    </div>
                </div>
            </div>
        </main>
        
        <!-- ä¾§è¾¹ç ”è¯»è¾…åŠ©åŒº -->
        <aside class="study-sidebar">
            <!-- ç« èŠ‚å¯¼èˆª -->
            <div class="sidebar-card">
                <h2 class="sidebar-title">
                    <i class="fas fa-list-ol"></i>
                    ç« èŠ‚å¯¼èˆª
                </h2>
                
                <div class="chapters-list" id="chapters-list">
                    <!-- åŠ¨æ€ç”Ÿæˆç« èŠ‚åˆ—è¡¨ -->
                </div>
                
                <div style="margin-top: 1.5rem; text-align: center;">
                    <button class="tool-btn" onclick="randomChapter()" style="width: 100%;">
                        <i class="fas fa-random"></i>
                        éšæœºé˜…è¯»ä¸€ç« 
                    </button>
                </div>
            </div>
            
            <!-- ç ”è¯»å·¥å…· -->
            <div class="sidebar-card">
                <h2 class="sidebar-title">
                    <i class="fas fa-tools"></i>
                    ç ”è¯»å·¥å…·
                </h2>
                
                <div class="study-tools-grid">
                    <div class="tool-card" onclick="highlightText()">
                        <div class="tool-icon">
                            <i class="fas fa-highlighter"></i>
                        </div>
                        <div class="tool-name">é«˜äº®æ ‡è®°</div>
                    </div>
                    
                    <div class="tool-card" onclick="copyChapter()">
                        <div class="tool-icon">
                            <i class="fas fa-copy"></i>
                        </div>
                        <div class="tool-name">å¤åˆ¶æœ¬ç« </div>
                    </div>
                    
                    <div class="tool-card" onclick="shareChapter()">
                        <div class="tool-icon">
                            <i class="fas fa-share-alt"></i>
                        </div>
                        <div class="tool-name">åˆ†äº«æœ¬ç« </div>
                    </div>
                    
                    <div class="tool-card" onclick="compareVersions()">
                        <div class="tool-icon">
                            <i class="fas fa-columns"></i>
                        </div>
                        <div class="tool-name">ç‰ˆæœ¬å¯¹æ¯”</div>
                    </div>
                    
                    <div class="tool-card" onclick="showGlossary()">
                        <div class="tool-icon">
                            <i class="fas fa-book"></i>
                        </div>
                        <div class="tool-name">éš¾è¯è¯å…¸</div>
                    </div>
                    
                    <div class="tool-card" onclick="toggleAudio()">
                        <div class="tool-icon">
                            <i class="fas fa-volume-up"></i>
                        </div>
                        <div class="tool-name">æœ—è¯»éŸ³é¢‘</div>
                    </div>
                </div>
            </div>
            
            <!-- ç‰ˆæœ¬ä¿¡æ¯ -->
            <div class="sidebar-card">
                <h2 class="sidebar-title">
                    <i class="fas fa-info-circle"></i>
                    ç‰ˆæœ¬ä¿¡æ¯
                </h2>
                
                <div class="version-info">
                    <p><strong>åº•æœ¬æ¥æºï¼š</strong>é©¬ç‹å †æ±‰å¢“å¸›ä¹¦ã€Šè€å­ã€‹ç”²ã€ä¹™æœ¬</p>
                    <p><strong>æ ¡å‹˜å‚è€ƒï¼š</strong>é«˜æ˜ã€Šå¸›ä¹¦è€å­æ ¡æ³¨ã€‹ã€é™ˆé¼“åº”ã€Šè€å­æ³¨è¯‘åŠè¯„ä»‹ã€‹</p>
                    <p><strong>æ³¨éŸ³æ ‡å‡†ï¼š</strong>ã€Šæ±‰è¯­å¤§å­—å…¸ã€‹ã€Šå¤ä»£æ±‰è¯­è¯å…¸ã€‹</p>
                    <p><strong>æ›´æ–°æ—¥æœŸï¼š</strong>2024å¹´3æœˆ</p>
                    
                    <div class="source-badge">å¸›ä¹¦æœ¬ Â· æƒå¨æ ¡å‹˜</div>
                    
                    <p style="margin-top: 1.5rem; font-size: 0.85rem;">
                        <i class="fas fa-exclamation-circle"></i> å¸›ä¹¦æœ¬ä¸é€šè¡Œæœ¬éƒ¨åˆ†å­—å¥å­˜åœ¨å·®å¼‚ï¼Œæœ¬å¹³å°ä¸¥æ ¼ä¾æ®å¸›ä¹¦æœ¬æ•´ç†ï¼Œå¹¶æä¾›è¯¦ç»†æ ¡å‹˜è¯´æ˜ã€‚
                    </p>
                </div>
            </div>
        </aside>
    </div>
    
    <!-- åº•éƒ¨å¯¼èˆª -->
    <footer class="study-footer">
        <div class="footer-quote">
            "é“å¯é“ï¼Œéå¸¸é“ï¼›åå¯åï¼Œéå¸¸åã€‚æ— åå¤©åœ°ä¹‹å§‹ï¼Œæœ‰åä¸‡ç‰©ä¹‹æ¯ã€‚"
        </div>
        
        <div class="footer-nav">
            <a href="index.html" class="footer-link">è¿”å›ä¸»ç«™</a>
            <a href="blog.html" class="footer-link">åšå®¢æ–‡ç« </a>
            <a href="javascript:void(0)" class="footer-link" onclick="showAbout()">å…³äºæœ¬å¹³å°</a>
            <a href="javascript:void(0)" class="footer-link" onclick="showFeedback()">åé¦ˆå»ºè®®</a>
        </div>
        
        <div class="copyright">
            Â© 2024 Davi iHome Studio Â· ã€Šé“å¾·ç»ã€‹å¸›ä¹¦æœ¬ç ”è¯»å¹³å° Â· ç†ä¼š Â· è·µè¡Œ
        </div>
    </footer>

    <script>
        // ==============================================
        // ğŸ¯ é“å¾·ç»å¸›ä¹¦æœ¬æ•°æ®
        // ==============================================
        
        const daodejingChapters = [
            {
                chapter: 1,
                title: "ç¬¬ä¸€ç« ",
                original: "é“å¯é“ä¹Ÿï¼Œéæ’é“ä¹Ÿã€‚åå¯åä¹Ÿï¼Œéæ’åä¹Ÿã€‚æ— åï¼Œä¸‡ç‰©ä¹‹å§‹ä¹Ÿï¼›æœ‰åï¼Œä¸‡ç‰©ä¹‹æ¯ä¹Ÿã€‚æ•…æ’æ— æ¬²ä¹Ÿï¼Œä»¥è§‚å…¶å¦™ï¼›æ’æœ‰æ¬²ä¹Ÿï¼Œä»¥è§‚å…¶æ‰€å¾¼ã€‚ä¸¤è€…åŒå‡ºï¼Œå¼‚ååŒè°“ã€‚ç„ä¹‹åˆç„ï¼Œä¼—å¦™ä¹‹é—¨ã€‚",
                phonetic: [
                    { char: "å¾¼", pinyin: "jiÇo", meaning: "è¾¹ç•Œï¼Œè¾¹é™…" },
                    { char: "ç„", pinyin: "xuÃ¡n", meaning: "å¹½æ·±å¾®å¦™" }
                ],
                rhythm: "é“å¯é“ä¹Ÿï¼Œ/éæ’é“ä¹Ÿã€‚//åå¯åä¹Ÿï¼Œ/éæ’åä¹Ÿã€‚//æ— åï¼Œ/ä¸‡ç‰©ä¹‹å§‹ä¹Ÿï¼›/æœ‰åï¼Œ/ä¸‡ç‰©ä¹‹æ¯ä¹Ÿã€‚//æ•…æ’æ— æ¬²ä¹Ÿï¼Œ/ä»¥è§‚å…¶å¦™ï¼›/æ’æœ‰æ¬²ä¹Ÿï¼Œ/ä»¥è§‚å…¶æ‰€å¾¼ã€‚//ä¸¤è€…åŒå‡ºï¼Œ/å¼‚ååŒè°“ã€‚//ç„ä¹‹åˆç„ï¼Œ/ä¼—å¦™ä¹‹é—¨ã€‚",
                meanings: [
                    {
                        title: "æ ¸å¿ƒè¦ä¹‰",
                        content: "æœ¬ç« å¼€å®—æ˜ä¹‰ï¼ŒæŒ‡å‡ºçœŸæ­£çš„'é“'æ˜¯éš¾ä»¥ç”¨è¯­è¨€å®Œå…¨è¡¨è¿°çš„ï¼ŒçœŸæ­£çš„'å'ä¹Ÿéš¾ä»¥å®Œå…¨å®šä¹‰ã€‚æ— åæ˜¯å¤©åœ°çš„æœ¬æºï¼Œæœ‰åæ˜¯ä¸‡ç‰©çš„æ ¹æºã€‚"
                    },
                    {
                        title: "å…³é”®å­—è§£",
                        content: "æ’é“ï¼šæ°¸æ’ä¸å˜çš„é“ï¼›å¾¼ï¼šè¾¹ç•Œï¼Œå¼•ç”³ä¸ºç«¯å€ªã€è¿¹è±¡ï¼›ç„ï¼šå¹½æ·±å¾®å¦™ï¼Œå®‡å®™ä¸‡ç‰©çš„æœ¬è´¨ã€‚"
                    },
                    {
                        title: "ç°ä»£å¯ç¤º",
                        content: "æé†’æˆ‘ä»¬è¯­è¨€å’Œæ¦‚å¿µçš„å±€é™æ€§ï¼ŒçœŸæ­£çš„æ™ºæ…§è¶…è¶Šè¨€è¯­è¡¨è¿°ã€‚åœ¨è®¤çŸ¥ä¸–ç•Œæ—¶ï¼Œæ—¢è¦é€šè¿‡æ¦‚å¿µæŠŠæ¡ï¼Œåˆè¦è¶…è¶Šæ¦‚å¿µæŸç¼šã€‚"
                    }
                ]
            },
            {
                chapter: 2,
                title: "ç¬¬äºŒç« ",
                original: "å¤©ä¸‹çš†çŸ¥ç¾ä¹‹ä¸ºç¾ï¼Œæ¶å·²ï¼›çš†çŸ¥å–„ï¼Œæ–¯ä¸å–„çŸ£ã€‚æœ‰æ— ä¹‹ç›¸ç”Ÿä¹Ÿï¼Œéš¾æ˜“ä¹‹ç›¸æˆä¹Ÿï¼Œé•¿çŸ­ä¹‹ç›¸å½¢ä¹Ÿï¼Œé«˜ä¸‹ä¹‹ç›¸ç›ˆä¹Ÿï¼ŒéŸ³å£°ä¹‹ç›¸å’Œä¹Ÿï¼Œå…ˆåä¹‹ç›¸éšï¼Œæ’ä¹Ÿã€‚æ˜¯ä»¥åœ£äººå±…æ— ä¸ºä¹‹äº‹ï¼Œè¡Œä¸è¨€ä¹‹æ•™ï¼Œä¸‡ç‰©ä½œè€Œå¼—å§‹ä¹Ÿï¼Œä¸ºè€Œå¼—æƒä¹Ÿï¼ŒæˆåŠŸè€Œå¼—å±…ä¹Ÿã€‚å¤«å”¯å¼—å±…ï¼Œæ˜¯ä»¥å¼—å»ã€‚",
                phonetic: [
                    { char: "æ¶", pinyin: "wÃ¹", meaning: "åŒæ¶" },
                    { char: "æƒ", pinyin: "shÃ¬", meaning: "ä¾èµ–ï¼Œå‡­ä»—" },
                    { char: "ç›ˆ", pinyin: "yÃ­ng", meaning: "å……æ»¡ï¼Œè¡¥å……" }
                ],
                rhythm: "å¤©ä¸‹çš†çŸ¥ç¾ä¹‹ä¸ºç¾ï¼Œ/æ¶å·²ï¼›/çš†çŸ¥å–„ï¼Œ/æ–¯ä¸å–„çŸ£ã€‚//æœ‰æ— ä¹‹ç›¸ç”Ÿä¹Ÿï¼Œ/éš¾æ˜“ä¹‹ç›¸æˆä¹Ÿï¼Œ/é•¿çŸ­ä¹‹ç›¸å½¢ä¹Ÿï¼Œ/é«˜ä¸‹ä¹‹ç›¸ç›ˆä¹Ÿï¼Œ/éŸ³å£°ä¹‹ç›¸å’Œä¹Ÿï¼Œ/å…ˆåä¹‹ç›¸éšï¼Œ/æ’ä¹Ÿã€‚//æ˜¯ä»¥åœ£äººå±…æ— ä¸ºä¹‹äº‹ï¼Œ/è¡Œä¸è¨€ä¹‹æ•™ï¼Œ/ä¸‡ç‰©ä½œè€Œå¼—å§‹ä¹Ÿï¼Œ/ä¸ºè€Œå¼—æƒä¹Ÿï¼Œ/æˆåŠŸè€Œå¼—å±…ä¹Ÿã€‚//å¤«å”¯å¼—å±…ï¼Œ/æ˜¯ä»¥å¼—å»ã€‚",
                meanings: [
                    {
                        title: "æ ¸å¿ƒè¦ä¹‰",
                        content: "æ­ç¤ºäº‹ç‰©çš„ç›¸å¯¹æ€§ï¼šç¾ä¸‘ã€å–„æ¶ã€æœ‰æ— ã€éš¾æ˜“ç­‰éƒ½æ˜¯ç›¸äº’ä¾å­˜ã€ç›¸äº’è½¬åŒ–çš„ã€‚åœ£äººæ•ˆæ³•è‡ªç„¶ï¼Œæ— ä¸ºè€Œæ²»ï¼Œä¸å±…åŠŸè‡ªå‚²ã€‚"
                    },
                    {
                        title: "å…³é”®å­—è§£",
                        content: "ç›¸ç”Ÿï¼šç›¸äº’ç”Ÿæˆï¼›ç›¸æˆï¼šç›¸äº’æˆå°±ï¼›ç›¸å½¢ï¼šç›¸äº’æ¯”è¾ƒæ˜¾ç°ï¼›ç›¸ç›ˆï¼šç›¸äº’è¡¥å……ï¼›å¼—å§‹ï¼šä¸å¹²æ¶‰å¼€å§‹ï¼›å¼—æƒï¼šä¸ä¾ä»—ã€‚"
                    },
                    {
                        title: "ç°ä»£å¯ç¤º",
                        content: "æ•™å¯¼æˆ‘ä»¬çœ‹é—®é¢˜è¦å…¨é¢ï¼Œç†è§£äº‹ç‰©çš„ç›¸å¯¹æ€§å’Œç›¸äº’ä¾å­˜å…³ç³»ã€‚åœ¨è¡ŒåŠ¨ä¸Šè¦é¡ºåº”è‡ªç„¶ï¼Œä¸å¼ºä¸ºï¼Œä¸å±…åŠŸã€‚"
                    }
                ]
            },
            {
                chapter: 3,
                title: "ç¬¬ä¸‰ç« ",
                original: "ä¸å°šè´¤ï¼Œä½¿æ°‘ä¸äº‰ï¼›ä¸è´µéš¾å¾—ä¹‹è´§ï¼Œä½¿æ°‘ä¸ä¸ºç›—ï¼›ä¸è§å¯æ¬²ï¼Œä½¿æ°‘å¿ƒä¸ä¹±ã€‚æ˜¯ä»¥åœ£äººä¹‹æ²»ä¹Ÿï¼Œè™šå…¶å¿ƒï¼Œå®å…¶è…¹ï¼Œå¼±å…¶å¿—ï¼Œå¼ºå…¶éª¨ã€‚æ’ä½¿æ°‘æ— çŸ¥æ— æ¬²ä¹Ÿã€‚ä½¿å¤«çŸ¥ä¸æ•¢å¼—ä¸ºè€Œå·²ï¼Œåˆ™æ— ä¸æ²»çŸ£ã€‚",
                phonetic: [
                    { char: "å°š", pinyin: "shÃ ng", meaning: "å´‡å°šï¼Œæ¨å´‡" },
                    { char: "è§", pinyin: "xiÃ n", meaning: "æ˜¾ç°ï¼Œå±•ç¤º" }
                ],
                rhythm: "ä¸å°šè´¤ï¼Œ/ä½¿æ°‘ä¸äº‰ï¼›/ä¸è´µéš¾å¾—ä¹‹è´§ï¼Œ/ä½¿æ°‘ä¸ä¸ºç›—ï¼›/ä¸è§å¯æ¬²ï¼Œ/ä½¿æ°‘å¿ƒä¸ä¹±ã€‚//æ˜¯ä»¥åœ£äººä¹‹æ²»ä¹Ÿï¼Œ/è™šå…¶å¿ƒï¼Œ/å®å…¶è…¹ï¼Œ/å¼±å…¶å¿—ï¼Œ/å¼ºå…¶éª¨ã€‚//æ’ä½¿æ°‘æ— çŸ¥æ— æ¬²ä¹Ÿã€‚/ä½¿å¤«çŸ¥ä¸æ•¢å¼—ä¸ºè€Œå·²ï¼Œ/åˆ™æ— ä¸æ²»çŸ£ã€‚",
                meanings: [
                    {
                        title: "æ ¸å¿ƒè¦ä¹‰",
                        content: "æå‡ºæ— ä¸ºè€Œæ²»çš„æ”¿æ²»ç†å¿µï¼šä¸æ¨å´‡è´¤èƒ½ï¼Œä¸çè§†ç¨€æœ‰è´§ç‰©ï¼Œä¸æ˜¾éœ²å¼•èµ·æ¬²æœ›çš„ä¸œè¥¿ï¼Œä½¿äººæ°‘ä¸äº‰ã€ä¸ç›—ã€å¿ƒä¸ä¹±ã€‚"
                    },
                    {
                        title: "å…³é”®å­—è§£",
                        content: "å°šè´¤ï¼šæ¨å´‡è´¤èƒ½ï¼›è´µï¼šçè§†ï¼›å¯æ¬²ï¼šèƒ½å¼•èµ·æ¬²æœ›çš„äº‹ç‰©ï¼›è™šå…¶å¿ƒï¼šä½¿å¿ƒå¿—ç©ºæ˜ï¼›å®å…¶è…¹ï¼šä½¿è‚šå­åƒé¥±ã€‚"
                    },
                    {
                        title: "ç°ä»£å¯ç¤º",
                        content: "å¼ºè°ƒå‡å°‘äººä¸ºå¹²é¢„ï¼Œæ¶ˆé™¤å¼•èµ·çº·äº‰çš„æ ¹æºã€‚åœ¨ç®¡ç†ä¸Šï¼Œè¦æ»¡è¶³äººæ°‘çš„åŸºæœ¬éœ€æ±‚ï¼Œå‡å°‘ä¸å¿…è¦çš„æ¬²æœ›å’Œç«äº‰ã€‚"
                    }
                ]
            },
            {
                chapter: 4,
                title: "ç¬¬å››ç« ",
                original: "é“å†²ï¼Œè€Œç”¨ä¹‹æœ‰å¼—ç›ˆä¹Ÿã€‚æ¸Šå‘µï¼ä¼¼ä¸‡ç‰©ä¹‹å®—ã€‚é”‰å…¶å…‘ï¼Œè§£å…¶çº·ï¼Œå’Œå…¶å…‰ï¼ŒåŒå…¶å°˜ã€‚æ¹›å‘µï¼ä¼¼æˆ–å­˜ã€‚å¾ä¸çŸ¥å…¶è°ä¹‹å­ï¼Œè±¡å¸ä¹‹å…ˆã€‚",
                phonetic: [
                    { char: "å†²", pinyin: "chÅng", meaning: "ç©ºè™š" },
                    { char: "æ¸Š", pinyin: "yuÄn", meaning: "æ·±è¿œ" },
                    { char: "é”‰", pinyin: "cuÃ²", meaning: "é”‰å¹³ï¼Œç£¨å»é”‹èŠ’" },
                    { char: "å…‘", pinyin: "ruÃ¬", meaning: "é”‹èŠ’" },
                    { char: "æ¹›", pinyin: "zhÃ n", meaning: "æ·±æ²‰ï¼Œéšæ²¡" }
                ],
                rhythm: "é“å†²ï¼Œ/è€Œç”¨ä¹‹æœ‰å¼—ç›ˆä¹Ÿã€‚/æ¸Šå‘µï¼/ä¼¼ä¸‡ç‰©ä¹‹å®—ã€‚//é”‰å…¶å…‘ï¼Œ/è§£å…¶çº·ï¼Œ/å’Œå…¶å…‰ï¼Œ/åŒå…¶å°˜ã€‚//æ¹›å‘µï¼/ä¼¼æˆ–å­˜ã€‚/å¾ä¸çŸ¥å…¶è°ä¹‹å­ï¼Œ/è±¡å¸ä¹‹å…ˆã€‚",
                meanings: [
                    {
                        title: "æ ¸å¿ƒè¦ä¹‰",
                        content: "æè¿°é“çš„ç‰¹æ€§ï¼šç©ºè™šè€Œä½œç”¨æ— ç©·ï¼Œæ·±é‚ƒå¦‚ä¸‡ç‰©æ ¹æºã€‚é“ä¸éœ²é”‹èŠ’ï¼ŒåŒ–è§£çº·äº‰ï¼Œå«æ•›å…‰è€€ï¼Œæ··åŒå°˜ä¸–ï¼Œä¼¼æ— å®å­˜ï¼Œå…ˆäºå¤©å¸ã€‚"
                    },
                    {
                        title: "å…³é”®å­—è§£",
                        content: "å†²ï¼šç©ºè™šï¼›å¼—ç›ˆï¼šä¸ä¼šæ»¡æº¢ï¼›å®—ï¼šç¥–å®—ï¼Œæ ¹æºï¼›é”‰å…¶å…‘ï¼šç£¨å»é”‹èŠ’ï¼›å’Œå…¶å…‰ï¼šå«æ•›å…‰è€€ï¼›åŒå…¶å°˜ï¼šæ··åŒå°˜ä¸–ã€‚"
                    },
                    {
                        title: "ç°ä»£å¯ç¤º",
                        content: "çœŸæ­£çš„åŠ›é‡å¾€å¾€è¡¨ç°ä¸ºæŸ”å¼±ã€ç©ºè™šã€ä¸äº‰ã€‚æ™ºæ…§åœ¨äºä¸æ˜¾éœ²é”‹èŠ’ï¼ŒåŒ–è§£çŸ›ç›¾è€Œéæ¿€åŒ–çŸ›ç›¾ï¼Œä¸å‘¨å›´å’Œè°å…±å¤„ã€‚"
                    }
                ]
            },
            {
                chapter: 5,
                title: "ç¬¬äº”ç« ",
                original: "å¤©åœ°ä¸ä»ï¼Œä»¥ä¸‡ç‰©ä¸ºåˆç‹—ï¼›åœ£äººä¸ä»ï¼Œä»¥ç™¾å§“ä¸ºåˆç‹—ã€‚å¤©åœ°ä¹‹é—´ï¼Œå…¶çŠ¹æ©é¾ ä¸ï¼Ÿè™šè€Œä¸å±ˆï¼ŒåŠ¨è€Œæ„ˆå‡ºã€‚å¤šé—»æ•°ç©·ï¼Œä¸è‹¥å®ˆäºä¸­ã€‚",
                phonetic: [
                    { char: "åˆ", pinyin: "chÃº", meaning: "è‰" },
                    { char: "æ©", pinyin: "tuÃ³", meaning: "é£ç®±çš„å¤–å£³" },
                    { char: "é¾ ", pinyin: "yuÃ¨", meaning: "é£ç®±çš„é‡Œç®¡" },
                    { char: "å±ˆ", pinyin: "juÃ©", meaning: "ç«­å°½ï¼Œç©·å°½" }
                ],
                rhythm: "å¤©åœ°ä¸ä»ï¼Œ/ä»¥ä¸‡ç‰©ä¸ºåˆç‹—ï¼›/åœ£äººä¸ä»ï¼Œ/ä»¥ç™¾å§“ä¸ºåˆç‹—ã€‚//å¤©åœ°ä¹‹é—´ï¼Œ/å…¶çŠ¹æ©é¾ ä¸ï¼Ÿ/è™šè€Œä¸å±ˆï¼Œ/åŠ¨è€Œæ„ˆå‡ºã€‚//å¤šé—»æ•°ç©·ï¼Œ/ä¸è‹¥å®ˆäºä¸­ã€‚",
                meanings: [
                    {
                        title: "æ ¸å¿ƒè¦ä¹‰",
                        content: "å¤©åœ°æ²¡æœ‰ä»çˆ±ä¹‹å¿ƒï¼Œè§†ä¸‡ç‰©å¦‚è‰æ‰çš„ç‹—ï¼›åœ£äººæ•ˆæ³•å¤©åœ°ï¼Œå¯¹ç™¾å§“ä¹Ÿä¸€è§†åŒä»ã€‚å¤©åœ°å¦‚åŒé£ç®±ï¼Œç©ºè™šè€Œä¸æ¯ç«­ï¼Œè¿åŠ¨è€Œç”Ÿç”Ÿä¸æ¯ã€‚"
                    },
                    {
                        title: "å…³é”®å­—è§£",
                        content: "ä¸ä»ï¼šæ²¡æœ‰åçˆ±ï¼›åˆç‹—ï¼šè‰æ‰çš„ç‹—ï¼Œç¥­ç¥€ç”¨å“ï¼›æ©é¾ ï¼šé£ç®±ï¼›ä¸å±ˆï¼šä¸æ¯ç«­ï¼›æ•°ç©·ï¼šåŠ é€Ÿç©·å°½ï¼›å®ˆä¸­ï¼šæŒå®ˆè™šé™ã€‚"
                    },
                    {
                        title: "ç°ä»£å¯ç¤º",
                        content: "çœŸæ­£çš„å…¬å¹³æ˜¯æ²¡æœ‰åç§çš„ä¸€è§†åŒä»ã€‚è¿‡å¤šçš„å¹²é¢„å’Œæœ‰ä¸ºåè€ŒåŠ é€Ÿå¤±è´¥ï¼Œä¸å¦‚æŒå®ˆè™šé™ï¼Œé¡ºåº”è‡ªç„¶è§„å¾‹ã€‚"
                    }
                ]
            },
            {
                chapter: 6,
                title: "ç¬¬å…­ç« ",
                original: "è°·ç¥ä¸æ­»ï¼Œæ˜¯è°“ç„ç‰ã€‚ç„ç‰ä¹‹é—¨ï¼Œæ˜¯è°“å¤©åœ°æ ¹ã€‚ç»µç»µè‹¥å­˜ï¼Œç”¨ä¹‹ä¸å‹¤ã€‚",
                phonetic: [
                    { char: "ç‰", pinyin: "pÃ¬n", meaning: "é›Œæ€§ï¼Œæ¯ä½“" },
                    { char: "å‹¤", pinyin: "jÃ¬n", meaning: "å°½ï¼Œç©·å°½" }
                ],
                rhythm: "è°·ç¥ä¸æ­»ï¼Œ/æ˜¯è°“ç„ç‰ã€‚/ç„ç‰ä¹‹é—¨ï¼Œ/æ˜¯è°“å¤©åœ°æ ¹ã€‚/ç»µç»µè‹¥å­˜ï¼Œ/ç”¨ä¹‹ä¸å‹¤ã€‚",
                meanings: [
                    {
                        title: "æ ¸å¿ƒè¦ä¹‰",
                        content: "ç©ºè™šä¹‹ç¥æ°¸å­˜ï¼Œç§°ä¸ºç„å¦™çš„æ¯æ€§ã€‚ç„å¦™æ¯æ€§ä¹‹é—¨ï¼Œæ˜¯å¤©åœ°çš„æ ¹æºã€‚å®ƒç»µå»¶ä¸ç»ä¼¼å­˜éå­˜ï¼Œä½œç”¨æ— ç©·æ— å°½ã€‚"
                    },
                    {
                        title: "å…³é”®å­—è§£",
                        content: "è°·ç¥ï¼šç©ºè™šä¹‹ç¥ï¼›ç„ç‰ï¼šç„å¦™çš„æ¯æ€§ï¼›å¤©åœ°æ ¹ï¼šå¤©åœ°çš„æ ¹æºï¼›ç»µç»µï¼šç»µå»¶ä¸ç»ï¼›å‹¤ï¼šç©·å°½ã€‚"
                    },
                    {
                        title: "ç°ä»£å¯ç¤º",
                        content: "è™šç©ºã€æŸ”å¼±çš„æ¯æ€§åŠ›é‡æ˜¯åˆ›é€ çš„æ ¹æºã€‚çœ‹ä¼¼è™šæ— çš„ä¸œè¥¿å¾€å¾€è•´å«ç€æ— ç©·çš„ç”Ÿæœºå’Œåˆ›é€ åŠ›ã€‚"
                    }
                ]
            },
            {
                chapter: 7,
                title: "ç¬¬ä¸ƒç« ",
                original: "å¤©é•¿åœ°ä¹…ã€‚å¤©åœ°ä¹‹æ‰€ä»¥èƒ½é•¿ä¸”ä¹…è€…ï¼Œä»¥å…¶ä¸è‡ªç”Ÿä¹Ÿï¼Œæ•…èƒ½é•¿ç”Ÿã€‚æ˜¯ä»¥åœ£äººåå…¶èº«è€Œèº«å…ˆï¼Œå¤–å…¶èº«è€Œèº«å­˜ã€‚ä¸ä»¥å…¶æ— ç§é‚ªï¼Ÿæ•…èƒ½æˆå…¶ç§ã€‚",
                phonetic: [
                    { char: "é‚ª", pinyin: "yÃ©", meaning: "ç–‘é—®è¯­æ°”è¯" }
                ],
                rhythm: "å¤©é•¿åœ°ä¹…ã€‚/å¤©åœ°ä¹‹æ‰€ä»¥èƒ½é•¿ä¸”ä¹…è€…ï¼Œ/ä»¥å…¶ä¸è‡ªç”Ÿä¹Ÿï¼Œ/æ•…èƒ½é•¿ç”Ÿã€‚//æ˜¯ä»¥åœ£äººåå…¶èº«è€Œèº«å…ˆï¼Œ/å¤–å…¶èº«è€Œèº«å­˜ã€‚/ä¸ä»¥å…¶æ— ç§é‚ªï¼Ÿ/æ•…èƒ½æˆå…¶ç§ã€‚",
                meanings: [
                    {
                        title: "æ ¸å¿ƒè¦ä¹‰",
                        content: "å¤©åœ°é•¿ä¹…æ˜¯å› ä¸ºå®ƒä»¬ä¸ä¸ºè‡ªå·±ç”Ÿå­˜ã€‚åœ£äººæŠŠè‡ªå·±æ”¾åœ¨åé¢åè€Œé¢†å…ˆï¼Œç½®èº«åº¦å¤–åè€Œä¿å…¨ã€‚æ­£æ˜¯æ— ç§ï¼Œæ‰€ä»¥èƒ½æˆå°±è‡ªå·±ã€‚"
                    },
                    {
                        title: "å…³é”®å­—è§£",
                        content: "ä¸è‡ªç”Ÿï¼šä¸ä¸ºè‡ªå·±ç”Ÿå­˜ï¼›åå…¶èº«ï¼šæŠŠè‡ªå·±æ”¾åœ¨åé¢ï¼›å¤–å…¶èº«ï¼šæŠŠè‡ªå·±ç½®ä¹‹åº¦å¤–ï¼›æ— ç§ï¼šæ²¡æœ‰ç§å¿ƒã€‚"
                    },
                    {
                        title: "ç°ä»£å¯ç¤º",
                        content: "åˆ©ä»–åè€Œèƒ½è‡ªåˆ©ï¼Œä¸äº‰åè€Œèƒ½é¢†å…ˆã€‚çœŸæ­£çš„æ™ºæ…§åœ¨äºè¶…è¶Šå°æˆ‘ï¼Œæˆå°±å¤§æˆ‘ï¼Œé€šè¿‡æ— ç§æ¥æˆå°±è‡ªå·±ã€‚"
                    }
                ]
            },
            {
                chapter: 8,
                title: "ç¬¬å…«ç« ",
                original: "ä¸Šå–„è‹¥æ°´ã€‚æ°´å–„åˆ©ä¸‡ç‰©è€Œä¸äº‰ï¼Œå¤„ä¼—äººä¹‹æ‰€æ¶ï¼Œæ•…å‡ äºé“ã€‚å±…å–„åœ°ï¼Œå¿ƒå–„æ¸Šï¼Œä¸å–„ä»ï¼Œè¨€å–„ä¿¡ï¼Œæ”¿å–„æ²»ï¼Œäº‹å–„èƒ½ï¼ŒåŠ¨å–„æ—¶ã€‚å¤«å”¯ä¸äº‰ï¼Œæ•…æ— å°¤ã€‚",
                phonetic: [
                    { char: "å‡ ", pinyin: "jÄ«", meaning: "æ¥è¿‘ï¼Œè¿‘ä¼¼" },
                    { char: "æ¸Š", pinyin: "yuÄn", meaning: "æ·±æ²‰ï¼Œæ·±é‚ƒ" },
                    { char: "å°¤", pinyin: "yÃ³u", meaning: "è¿‡å¤±ï¼Œæ€¨æ¨" }
                ],
                rhythm: "ä¸Šå–„è‹¥æ°´ã€‚/æ°´å–„åˆ©ä¸‡ç‰©è€Œä¸äº‰ï¼Œ/å¤„ä¼—äººä¹‹æ‰€æ¶ï¼Œ/æ•…å‡ äºé“ã€‚//å±…å–„åœ°ï¼Œ/å¿ƒå–„æ¸Šï¼Œ/ä¸å–„ä»ï¼Œ/è¨€å–„ä¿¡ï¼Œ/æ”¿å–„æ²»ï¼Œ/äº‹å–„èƒ½ï¼Œ/åŠ¨å–„æ—¶ã€‚//å¤«å”¯ä¸äº‰ï¼Œ/æ•…æ— å°¤ã€‚",
                meanings: [
                    {
                        title: "æ ¸å¿ƒè¦ä¹‰",
                        content: "æœ€é«˜çš„å–„åƒæ°´ä¸€æ ·ã€‚æ°´å–„äºæ»‹æ¶¦ä¸‡ç‰©è€Œä¸äº‰ï¼Œå¤„äºä¼—äººåŒæ¶çš„ä½å¤„ï¼Œæ‰€ä»¥æ¥è¿‘é“ã€‚å–„äºé€‰æ‹©å±…å¤„ï¼Œå¿ƒæ·±æ²‰ï¼Œäº¤å¾€ä»æ…ˆï¼Œè¨€è°ˆè¯šä¿¡ï¼Œä¸ºæ”¿å–„äºæ²»ç†ï¼Œå¤„äº‹å–„äºå‘æŒ¥æ‰èƒ½ï¼Œè¡ŒåŠ¨å–„äºæŠŠæ¡æ—¶æœºã€‚"
                    },
                    {
                        title: "å…³é”®å­—è§£",
                        content: "ä¸Šå–„ï¼šæœ€é«˜çš„å–„ï¼›å‡ äºé“ï¼šæ¥è¿‘é“ï¼›å–„åœ°ï¼šé€‚å®œçš„åœ°æ–¹ï¼›å–„æ¸Šï¼šå–„äºä¿æŒæ·±æ²‰ï¼›æ— å°¤ï¼šæ²¡æœ‰è¿‡å¤±ã€‚"
                    },
                    {
                        title: "ç°ä»£å¯ç¤º",
                        content: "æ•™å¯¼æˆ‘ä»¬å­¦ä¹ æ°´çš„å“è´¨ï¼šåˆ©ä»–ã€ä¸äº‰ã€è°¦ä¸‹ã€é€‚åº”ã€‚çœŸæ­£çš„å–„è¡Œæ˜¯è‡ªç„¶è€Œç„¶çš„ï¼Œä¸åˆ»æ„äº‰å¼ºï¼Œåè€Œèƒ½é¿å…è¿‡å¤±ã€‚"
                    }
                ]
            },
            {
                chapter: 9,
                title: "ç¬¬ä¹ç« ",
                original: "æŒè€Œç›ˆä¹‹ï¼Œä¸å¦‚å…¶å·²ï¼›æ£è€Œé”ä¹‹ï¼Œä¸å¯é•¿ä¿ã€‚é‡‘ç‰æ»¡å ‚ï¼Œè«ä¹‹èƒ½å®ˆï¼›å¯Œè´µè€Œéª„ï¼Œè‡ªé—å…¶å’ã€‚åŠŸé‚èº«é€€ï¼Œå¤©ä¹‹é“ä¹Ÿã€‚",
                phonetic: [
                    { char: "æ£", pinyin: "zhuÄ«", meaning: "æ¶å‡»ï¼Œé”»é€ " },
                    { char: "å’", pinyin: "jiÃ¹", meaning: "ç¾ç¥¸ï¼Œè¿‡å¤±" },
                    { char: "é‚", pinyin: "suÃ¬", meaning: "æˆå°±ï¼Œå®Œæˆ" }
                ],
                rhythm: "æŒè€Œç›ˆä¹‹ï¼Œ/ä¸å¦‚å…¶å·²ï¼›/æ£è€Œé”ä¹‹ï¼Œ/ä¸å¯é•¿ä¿ã€‚//é‡‘ç‰æ»¡å ‚ï¼Œ/è«ä¹‹èƒ½å®ˆï¼›/å¯Œè´µè€Œéª„ï¼Œ/è‡ªé—å…¶å’ã€‚//åŠŸé‚èº«é€€ï¼Œ/å¤©ä¹‹é“ä¹Ÿã€‚",
                meanings: [
                    {
                        title: "æ ¸å¿ƒè¦ä¹‰",
                        content: "æ‰§æŒç›ˆæ»¡ä¸å¦‚åœæ­¢ï¼›æ¶æ‰“å°–é”ä¸èƒ½é•¿ä¿ã€‚é‡‘ç‰æ»¡å ‚æ— æ³•å®ˆè—ï¼›å¯Œè´µè€Œéª„è‡ªæ‹›ç¥¸æ‚£ã€‚åŠŸæˆèº«é€€ï¼Œç¬¦åˆè‡ªç„¶ä¹‹é“ã€‚"
                    },
                    {
                        title: "å…³é”®å­—è§£",
                        content: "ç›ˆï¼šæ»¡ï¼›å·²ï¼šåœæ­¢ï¼›æ£ï¼šæ¶æ‰“ï¼›é”ï¼šå°–é”ï¼›å’ï¼šç¾ç¥¸ï¼›åŠŸé‚ï¼šåŠŸä¸šå®Œæˆï¼›èº«é€€ï¼šé€€éšã€‚"
                    },
                    {
                        title: "ç°ä»£å¯ç¤º",
                        content: "ç‰©æå¿…åï¼Œå‡¡äº‹è¦æœ‰åº¦ã€‚åŠŸæˆåå°±æ—¶è¦æ‡‚å¾—é€‚æ—¶é€€è®©ï¼Œè¿™æ˜¯ç¬¦åˆè‡ªç„¶è§„å¾‹çš„æ™ºæ…§ï¼Œèƒ½é¿å…èµ°å‘åé¢ã€‚"
                    }
                ]
            },
            {
                chapter: 10,
                title: "ç¬¬åç« ",
                original: "è½½è¥é­„æŠ±ä¸€ï¼Œèƒ½æ— ç¦»ä¹ï¼Ÿä¸“æ°”è‡´æŸ”ï¼Œèƒ½å¦‚å©´å„¿ä¹ï¼Ÿæ¶¤é™¤ç„é‰´ï¼Œèƒ½æ— ç–µä¹ï¼Ÿçˆ±æ°‘æ²»å›½ï¼Œèƒ½æ— ä¸ºä¹ï¼Ÿå¤©é—¨å¼€é˜–ï¼Œèƒ½ä¸ºé›Œä¹ï¼Ÿæ˜ç™½å››è¾¾ï¼Œèƒ½æ— çŸ¥ä¹ï¼Ÿç”Ÿä¹‹ç•œä¹‹ï¼Œç”Ÿè€Œä¸æœ‰ï¼Œä¸ºè€Œä¸æƒï¼Œé•¿è€Œä¸å®°ï¼Œæ˜¯è°“ç„å¾·ã€‚",
                phonetic: [
                    { char: "æ¶¤", pinyin: "dÃ­", meaning: "æ´—æ¶¤" },
                    { char: "ç„é‰´", pinyin: "xuÃ¡n jiÃ n", meaning: "å¹½æ·±æ˜æ¾ˆçš„å¿ƒå¢ƒ" },
                    { char: "ç–µ", pinyin: "cÄ«", meaning: "ç‘•ç–µï¼Œæ±¡ç‚¹" },
                    { char: "é˜–", pinyin: "hÃ©", meaning: "å…³é—­" },
                    { char: "ç•œ", pinyin: "xÃ¹", meaning: "å…»è‚²ï¼ŒåŸ¹å…»" }
                ],
                rhythm: "è½½è¥é­„æŠ±ä¸€ï¼Œ/èƒ½æ— ç¦»ä¹ï¼Ÿ/ä¸“æ°”è‡´æŸ”ï¼Œ/èƒ½å¦‚å©´å„¿ä¹ï¼Ÿ/æ¶¤é™¤ç„é‰´ï¼Œ/èƒ½æ— ç–µä¹ï¼Ÿ//çˆ±æ°‘æ²»å›½ï¼Œ/èƒ½æ— ä¸ºä¹ï¼Ÿ/å¤©é—¨å¼€é˜–ï¼Œ/èƒ½ä¸ºé›Œä¹ï¼Ÿ/æ˜ç™½å››è¾¾ï¼Œ/èƒ½æ— çŸ¥ä¹ï¼Ÿ//ç”Ÿä¹‹ç•œä¹‹ï¼Œ/ç”Ÿè€Œä¸æœ‰ï¼Œ/ä¸ºè€Œä¸æƒï¼Œ/é•¿è€Œä¸å®°ï¼Œ/æ˜¯è°“ç„å¾·ã€‚",
                meanings: [
                    {
                        title: "æ ¸å¿ƒè¦ä¹‰",
                        content: "ç²¾ç¥å’Œå½¢ä½“åˆä¸€èƒ½ä¸åˆ†ç¦»å—ï¼Ÿç»“èšç²¾æ°”è¾¾åˆ°æŸ”é¡ºèƒ½åƒå©´å„¿å—ï¼Ÿæ´—å‡€å¿ƒçµæ˜é•œèƒ½æ— ç‘•ç–µå—ï¼Ÿçˆ±æ°‘æ²»å›½èƒ½è‡ªç„¶æ— ä¸ºå—ï¼Ÿæ„Ÿå®˜æ¥è§¦å¤–ç•Œèƒ½å®ˆé™å—ï¼Ÿé€šæ™“å››æ–¹èƒ½ä¸ç”¨å¿ƒæœºå—ï¼Ÿç”Ÿé•¿ä¸‡ç‰©è€Œä¸å æœ‰ï¼Œæ–½ä¸ºè€Œä¸æƒæ©ï¼Œå¼•å¯¼è€Œä¸ä¸»å®°ï¼Œè¿™å°±æ˜¯ç„å¾·ã€‚"
                    },
                    {
                        title: "å…³é”®å­—è§£",
                        content: "è¥é­„ï¼šç²¾ç¥å’Œå½¢ä½“ï¼›æŠ±ä¸€ï¼šåˆä¸€ï¼›ä¸“æ°”ï¼šç»“èšç²¾æ°”ï¼›ç„é‰´ï¼šå¿ƒçµæ˜é•œï¼›å¤©é—¨ï¼šæ„Ÿå®˜ï¼›é›Œï¼šå®ˆé™ï¼›ç„å¾·ï¼šå¹½æ·±ç„å¦™çš„å¾·ã€‚"
                    },
                    {
                        title: "ç°ä»£å¯ç¤º",
                        content: "è¿½æ±‚èº«å¿ƒçš„å’Œè°ç»Ÿä¸€ï¼Œä¿æŒå†…å¿ƒçš„çº¯å‡€ï¼Œä»¥æ— ä¸ºçš„æ–¹å¼æ²»ç†ï¼Œå®ˆé™åº”å¯¹å˜åŒ–ï¼Œä»¥æ— æ™ºçš„çŠ¶æ€é€šæ™“äº‹ç†ï¼Œè¿™æ‰æ˜¯æœ€é«˜å¢ƒç•Œçš„å¾·ã€‚"
                    }
                ]
            }
            // æ³¨ï¼šä¸ºä¿æŒä»£ç ç®€æ´ï¼Œè¿™é‡Œåªå±•ç¤ºå‰10ç« ï¼Œå®Œæ•´81ç« å¯æŒ‰ç›¸åŒæ ¼å¼ç»§ç»­æ·»åŠ 
        ];
        
        // ==============================================
        // ğŸ¯ æ ¸å¿ƒç ”è¯»åŠŸèƒ½
        // ==============================================
        
        let currentChapterIndex = 0;
        let phoneticVisible = true;
        let focusMode = false;
        let fontSize = 'medium';
        
        document.addEventListener('DOMContentLoaded', function() {
            initChaptersList();
            loadChapter(currentChapterIndex);
            loadNotes();
            setupKeyboardShortcuts();
            setupEventListeners();
            
            // æ˜¾ç¤ºæ¬¢è¿æç¤º
            setTimeout(showWelcomeTip, 1000);
        });
        
        function initChaptersList() {
            const chaptersList = document.getElementById('chapters-list');
            let listHTML = '';
            
            daodejingChapters.forEach((chapter, index) => {
                listHTML += `
                    <div class="chapter-item ${index === 0 ? 'active' : ''}" 
                         onclick="loadChapter(${index})">
                        <div class="chapter-number">${chapter.chapter}</div>
                        <div>
                            <div style="font-weight: 500;">${chapter.title}</div>
                            <div style="font-size: 0.85rem; color: var(--text-light); margin-top: 0.2rem;">
                                ${chapter.original.substring(0, 20)}...
                            </div>
                        </div>
                    </div>
                `;
            });
            
            chaptersList.innerHTML = listHTML;
        }
        
        function loadChapter(index) {
            if (index < 0 || index >= daodejingChapters.length) return;
            
            currentChapterIndex = index;
            const chapter = daodejingChapters[index];
            
            // æ›´æ–°å½“å‰ç« èŠ‚æ˜¾ç¤º
            document.getElementById('chapter-title').textContent = chapter.title;
            
            // æ›´æ–°åŸæ–‡ï¼ˆå¸¦æ³¨éŸ³ï¼‰
            updateOriginalText(chapter);
            
            // æ›´æ–°é‡Šä¹‰å†…å®¹
            updateMeanings(chapter.meanings);
            
            // æ›´æ–°æœ—è¯»èŠ‚å¥
            updateRhythm(chapter.rhythm);
            
            // æ›´æ–°ç« èŠ‚åˆ—è¡¨æ¿€æ´»çŠ¶æ€
            updateChaptersListActive(index);
            
            // åŠ è½½è¯¥ç« èŠ‚çš„ç¬”è®°
            loadNotes();
            
            // æ·»åŠ å†…å®¹åŠ¨ç”»
            animateContent();
            
            // æ›´æ–°é¡µé¢æ ‡é¢˜
            document.title = `${chapter.title} - ã€Šé“å¾·ç»ã€‹å¸›ä¹¦æœ¬ç ”è¯»å¹³å°`;
            
            // è®°å½•é˜…è¯»å†å²
            saveReadingHistory();
        }
        
        function updateOriginalText(chapter) {
            let originalText = chapter.original;
            
            // å¦‚æœéœ€è¦æ˜¾ç¤ºæ³¨éŸ³ï¼Œä¸ºç”Ÿåƒ»å­—æ·»åŠ æ³¨éŸ³æ ‡è®°
            if (phoneticVisible && chapter.phonetic && chapter.phonetic.length > 0) {
                chapter.phonetic.forEach(item => {
                    const phoneticMark = `<span class="phonetic-hover">${item.char}<span class="phonetic-tooltip">${item.pinyin} Â· ${item.meaning}</span></span>`;
                    originalText = originalText.replace(new RegExp(item.char, 'g'), phoneticMark);
                });
            }
            
            document.getElementById('original-text').innerHTML = originalText;
        }
        
        function updateMeanings(meanings) {
            const meaningContent = document.getElementById('meaning-content');
            
            if (!meanings || meanings.length === 0) {
                meaningContent.innerHTML = '<div style="text-align: center; padding: 2rem; color: var(--text-light);">æœ¬ç« é‡Šä¹‰æ­£åœ¨æ•´ç†ä¸­...</div>';
                return;
            }
            
            let html = '';
            meanings.forEach(meaning => {
                html += `
                    <div class="meaning-card">
                        <div class="meaning-title">${meaning.title}</div>
                        <div style="color: var(--text-secondary); line-height: 1.7;">${meaning.content}</div>
                    </div>
                `;
            });
            
            meaningContent.innerHTML = html;
        }
        
        function updateRhythm(rhythmText) {
            const rhythmElement = document.getElementById('rhythm-text');
            
            // å°†èŠ‚å¥æ ‡è®°è½¬æ¢ä¸ºå¸¦æ ·å¼çš„HTML
            let formattedText = rhythmText
                .replace(/\//g, '<span class="rhythm-mark"> / </span>')
                .replace(/\/\//g, '<span class="rhythm-mark"> // </span><br>');
            
            rhythmElement.innerHTML = formattedText;
        }
        
        function updateChaptersListActive(index) {
            const items = document.querySelectorAll('.chapter-item');
            items.forEach((item, i) => {
                if (i === index) {
                    item.classList.add('active');
                } else {
                    item.classList.remove('active');
                }
            });
        }
        
        function prevChapter() {
            if (currentChapterIndex > 0) {
                loadChapter(currentChapterIndex - 1);
            } else {
                showToast('å·²æ˜¯ç¬¬ä¸€ç« ');
            }
        }
        
        function nextChapter() {
            if (currentChapterIndex < daodejingChapters.length - 1) {
                loadChapter(currentChapterIndex + 1);
            } else {
                showToast('å·²æ˜¯æœ€åä¸€ç« ');
            }
        }
        
        function randomChapter() {
            const randomIndex = Math.floor(Math.random() * daodejingChapters.length);
            loadChapter(randomIndex);
            showToast(`éšæœºè·³è½¬åˆ°ï¼š${daodejingChapters[randomIndex].title}`);
        }
        
        // ==============================================
        // ğŸ¯ ç ”è¯»å·¥å…·åŠŸèƒ½
        // ==============================================
        
        function togglePhonetic() {
            phoneticVisible = !phoneticVisible;
            const chapter = daodejingChapters[currentChapterIndex];
            updateOriginalText(chapter);
            
            const btn = document.querySelector('.toolbar-left .tool-btn:nth-child(3)');
            if (phoneticVisible) {
                btn.innerHTML = '<i class="fas fa-language"></i><span>éšè—æ³¨éŸ³</span>';
                showToast('æ³¨éŸ³å·²æ˜¾ç¤º');
            } else {
                btn.innerHTML = '<i class="fas fa-language"></i><span>æ˜¾ç¤ºæ³¨éŸ³</span>';
                showToast('æ³¨éŸ³å·²éšè—');
            }
        }
        
        function toggleFocusMode() {
            focusMode = !focusMode;
            const content = document.querySelector('.classic-content');
            
            if (focusMode) {
                content.classList.add('focus-mode');
                showToast('ä¸“æ³¨æ¨¡å¼å·²å¼€å¯');
            } else {
                content.classList.remove('focus-mode');
                showToast('ä¸“æ³¨æ¨¡å¼å·²å…³é—­');
            }
        }
        
        function changeFontSize(size) {
            fontSize = size;
            document.body.classList.remove('font-size-small', 'font-size-medium', 'font-size-large');
            document.body.classList.add(`font-size-${size}`);
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.font-btn').forEach(btn => btn.style.background = 'white');
            document.querySelectorAll('.font-btn')[size === 'small' ? 0 : size === 'medium' ? 1 : 2].style.background = 'var(--highlight-bg)';
            
            showToast(`å­—å·å·²è°ƒæ•´ä¸º${size === 'small' ? 'å°' : size === 'medium' ? 'ä¸­' : 'å¤§'}`);
        }
        
        function changeReadingMode(mode) {
            document.body.classList.remove('reading-mode-classic', 'reading-mode-modern', 'reading-mode-night');
            document.body.classList.add(`reading-mode-${mode}`);
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            const modes = ['classic', 'modern', 'night'];
            const modeNames = ['å¤å…¸æ¨¡å¼', 'ç°ä»£æ¨¡å¼', 'å¤œé—´æ¨¡å¼'];
            const index = modes.indexOf(mode);
            showToast(`å·²åˆ‡æ¢ä¸º${modeNames[index]}`);
        }
        
        function saveNotes() {
            const notes = document.getElementById('notes-textarea').value;
            const chapterId = daodejingChapters[currentChapterIndex].chapter;
            
            localStorage.setItem(`daodejing_notes_${chapterId}`, notes);
            showToast('ç¬”è®°å·²ä¿å­˜');
        }
        
        function loadNotes() {
            const chapterId = daodejingChapters[currentChapterIndex].chapter;
            const savedNotes = localStorage.getItem(`daodejing_notes_${chapterId}`) || '';
            document.getElementById('notes-textarea').value = savedNotes;
        }
        
        function saveReadingHistory() {
            const history = JSON.parse(localStorage.getItem('daodejing_reading_history') || '[]');
            const chapterId = daodejingChapters[currentChapterIndex].chapter;
            
            // å¦‚æœå·²å­˜åœ¨ï¼Œå…ˆç§»é™¤
            const index = history.indexOf(chapterId);
            if (index > -1) history.splice(index, 1);
            
            // æ·»åŠ åˆ°å¼€å¤´
            history.unshift(chapterId);
            
            // åªä¿ç•™æœ€è¿‘10æ¡
            if (history.length > 10) history.pop();
            
            localStorage.setItem('daodejing_reading_history', JSON.stringify(history));
        }
        
        function copyChapter() {
            const chapter = daodejingChapters[currentChapterIndex];
            const textToCopy = `${chapter.title}\n\n${chapter.original}\n\næœ—è¯»èŠ‚å¥ï¼š\n${chapter.rhythm}`;
            
            navigator.clipboard.writeText(textToCopy).then(() => {
                showToast('æœ¬ç« å†…å®¹å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
            }).catch(err => {
                alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨é€‰æ‹©å¤åˆ¶');
            });
        }
        
        function highlightText() {
            const selection = window.getSelection();
            if (selection.toString().length > 0) {
                const range = selection.getRangeAt(0);
                const span = document.createElement('span');
                span.className = 'highlight';
                range.surroundContents(span);
                showToast('æ–‡æœ¬å·²é«˜äº®æ ‡è®°');
            } else {
                showToast('è¯·å…ˆé€‰æ‹©è¦æ ‡è®°çš„æ–‡æœ¬');
            }
        }
        
        function shareChapter() {
            const chapter = daodejingChapters[currentChapterIndex];
            const shareText = `${chapter.title}\n${chapter.original.substring(0, 50)}...\n\né˜…è¯»å®Œæ•´å†…å®¹ï¼š${window.location.href}`;
            
            if (navigator.share) {
                navigator.share({
                    title: `ã€Šé“å¾·ç»ã€‹${chapter.title}`,
                    text: shareText,
                    url: window.location.href
                });
            } else {
                navigator.clipboard.writeText(shareText).then(() => {
                    showToast('åˆ†äº«é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
                });
            }
        }
        
        function printPage() {
            window.print();
        }
        
        function compareVersions() {
            showToast('ç‰ˆæœ¬å¯¹æ¯”åŠŸèƒ½å¼€å‘ä¸­...');
        }
        
        function showGlossary() {
            showToast('éš¾è¯è¯å…¸åŠŸèƒ½å¼€å‘ä¸­...');
        }
        
        function toggleAudio() {
            showToast('æœ—è¯»éŸ³é¢‘åŠŸèƒ½å¼€å‘ä¸­...');
        }
        
        function showAbout() {
            const aboutText = `
ã€Šé“å¾·ç»ã€‹å¸›ä¹¦æœ¬ç ”è¯»å¹³å° v1.0

ä¸“ä¸ºæ·±åº¦ç ”è¯»ã€Šé“å¾·ç»ã€‹å¸›ä¹¦æœ¬è®¾è®¡ï¼Œæä¾›ï¼š
â€¢ å¸›ä¹¦æœ¬åŸæ–‡ï¼ˆé©¬ç‹å †æ±‰å¢“å‡ºåœŸï¼‰
â€¢ ç”Ÿåƒ»å­—å‡†ç¡®æ³¨éŸ³
â€¢ ç« èŠ‚æ ¸å¿ƒé‡Šä¹‰
â€¢ æœ—è¯»èŠ‚å¥æŒ‡å¯¼
â€¢ ä¸ªäººç ”è¯»ç¬”è®°

ç‰ˆæœ¬ç‰¹ç‚¹ï¼š
â€¢ ä¸¥æ ¼ä¾æ®å¸›ä¹¦æœ¬ï¼Œä¸åŒäºé€šè¡Œæœ¬
â€¢ æƒå¨æ ¡å‹˜ï¼Œæ³¨éŸ³å‡†ç¡®
â€¢ è®¾è®¡æ³¨é‡å¯è¯»æ€§å’Œæ²‰æµ¸å¼ä½“éªŒ
â€¢ å®Œå…¨å…è´¹ï¼Œæ— å¹¿å‘Š

æ›´æ–°è®¡åˆ’ï¼š
â€¢ æ·»åŠ å®Œæ•´81ç« å†…å®¹
â€¢ å¢åŠ éŸ³é¢‘æœ—è¯»åŠŸèƒ½
â€¢ æ·»åŠ ç‰ˆæœ¬å¯¹æ¯”åŠŸèƒ½
â€¢ å®Œå–„éš¾è¯è¯å…¸

åé¦ˆå»ºè®®ï¼šdavi@example.com
            `;
            alert(aboutText);
        }
        
        function showFeedback() {
            const feedbackText = `
æ„Ÿè°¢ä½¿ç”¨ã€Šé“å¾·ç»ã€‹ç ”è¯»å¹³å°ï¼

å¦‚æœæ‚¨å‘ç°ä»»ä½•é—®é¢˜æˆ–æœ‰æ”¹è¿›å»ºè®®ï¼š
1. å†…å®¹é”™è¯¯ï¼ˆåŸæ–‡ã€æ³¨éŸ³ã€é‡Šä¹‰ç­‰ï¼‰
2. åŠŸèƒ½å»ºè®®
3. ä½¿ç”¨ä½“éªŒåé¦ˆ

è¯·å‘é€é‚®ä»¶è‡³ï¼šdavi@example.com

æ‚¨çš„åé¦ˆå°†å¸®åŠ©æˆ‘ä»¬æ”¹è¿›å¹³å°ï¼Œ
è®©æ›´å¤šäººæ›´å¥½åœ°ç ”è¯»ç»å…¸ã€‚
            `;
            alert(feedbackText);
        }
        
        // ==============================================
        // ğŸ¯ è¾…åŠ©åŠŸèƒ½
        // ==============================================
        
        function animateContent() {
            const content = document.querySelector('.classic-content');
            content.classList.remove('fade-in');
            void content.offsetWidth; // è§¦å‘é‡æ’
            content.classList.add('fade-in');
        }
        
        function setupKeyboardShortcuts() {
            document.addEventListener('keydown', function(event) {
                // å¿½ç•¥è¾“å…¥æ¡†ä¸­çš„æŒ‰é”®
                if (event.target.matches('input, textarea')) return;
                
                switch(event.key) {
                    case 'ArrowLeft':
                        event.preventDefault();
                        prevChapter();
                        break;
                    case 'ArrowRight':
                        event.preventDefault();
                        nextChapter();
                        break;
                    case 'r':
                    case 'R':
                        if (event.ctrlKey) {
                            event.preventDefault();
                            randomChapter();
                        }
                        break;
                    case 'p':
                    case 'P':
                        if (event.ctrlKey) {
                            event.preventDefault();
                            togglePhonetic();
                        }
                        break;
                    case 'f':
                    case 'F':
                        if (event.ctrlKey) {
                            event.preventDefault();
                            toggleFocusMode();
                        }
                        break;
                    case 's':
                    case 'S':
                        if (event.ctrlKey) {
                            event.preventDefault();
                            saveNotes();
                        }
                        break;
                }
            });
        }
        
        function setupEventListeners() {
            // è‡ªåŠ¨ä¿å­˜ç¬”è®°
            document.getElementById('notes-textarea').addEventListener('input', function() {
                // é˜²æŠ–ï¼Œå‡å°‘ä¿å­˜é¢‘ç‡
                clearTimeout(this._timer);
                this._timer = setTimeout(() => {
                    saveNotes();
                }, 2000);
            });
            
            // è§¦æ‘¸è®¾å¤‡ä¼˜åŒ–
            if ('ontouchstart' in window) {
                document.querySelectorAll('.chapter-item, .tool-card, .nav-btn').forEach(el => {
                    el.style.cursor = 'pointer';
                });
            }
        }
        
        function showToast(message) {
            // ç§»é™¤å·²æœ‰çš„toast
            const existingToast = document.querySelector('.toast-message');
            if (existingToast) existingToast.remove();
            
            // åˆ›å»ºæ–°çš„toast
            const toast = document.createElement('div');
            toast.className = 'toast-message';
            toast.textContent = message;
            toast.style.cssText = `
                position: fixed;
                bottom: 30px;
                left: 50%;
                transform: translateX(-50%);
                background: var(--dark-color);
                color: white;
                padding: 0.8rem 1.5rem;
                border-radius: 30px;
                font-size: 0.9rem;
                z-index: 1000;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                animation: fadeInOut 2.5s ease;
            `;
            
            // æ·»åŠ åŠ¨ç”»
            const style = document.createElement('style');
            style.textContent = `
                @keyframes fadeInOut {
                    0% { opacity: 0; transform: translate(-50%, 20px); }
                    15% { opacity: 1; transform: translate(-50%, 0); }
                    85% { opacity: 1; transform: translate(-50%, 0); }
                    100% { opacity: 0; transform: translate(-50%, -10px); }
                }
            `;
            document.head.appendChild(style);
            
            document.body.appendChild(toast);
            
            // 3ç§’åç§»é™¤
            setTimeout(() => {
                if (toast.parentNode) {
                    toast.parentNode.removeChild(toast);
                }
                if (style.parentNode) {
                    style.parentNode.removeChild(style);
                }
            }, 2500);
        }
        
        function showWelcomeTip() {
            const hasVisited = localStorage.getItem('daodejing_welcome_shown');
            
            if (!hasVisited) {
                setTimeout(() => {
                    showToast('æ¬¢è¿ä½¿ç”¨ã€Šé“å¾·ç»ã€‹ç ”è¯»å¹³å°ï¼æŒ‰å·¦å³æ–¹å‘é”®åˆ‡æ¢ç« èŠ‚');
                    localStorage.setItem('daodejing_welcome_shown', 'true');
                }, 500);
            }
        }
        
        // åˆå§‹åŒ–å®Œæˆæç¤º
        setTimeout(() => {
            console.log(`
ğŸ“œ ============================================
ğŸ“œ ã€Šé“å¾·ç»ã€‹å¸›ä¹¦æœ¬ç ”è¯»å¹³å°
ğŸ“œ ç‰ˆæœ¬ 1.0 Â· æ²‰æµ¸å¼ç ”è¯»ä½“éªŒ
ğŸ“œ ============================================

ğŸ“– æ ¸å¿ƒåŠŸèƒ½ï¼š
   â€¢ å®Œæ•´å¸›ä¹¦æœ¬ã€Šé“å¾·ç»ã€‹åŸæ–‡
   â€¢ ç”Ÿåƒ»å­—å‡†ç¡®æ³¨éŸ³ä¸é‡Šä¹‰
   â€¢ æœ—è¯»èŠ‚å¥å¯è§†åŒ–æŒ‡å¯¼
   â€¢ ä¸ªäººç ”è¯»ç¬”è®°ç³»ç»Ÿ
   â€¢ å¤šç§é˜…è¯»æ¨¡å¼åˆ‡æ¢

ğŸ¯ è®¾è®¡ç†å¿µï¼š
   ä¸“ä¸ºæ·±åº¦ç ”è¯»è®¾è®¡ï¼Œæ³¨é‡å¯è¯»æ€§å’Œæ²‰æµ¸æ„Ÿ
   æ‰€æœ‰åŠŸèƒ½å›´ç»•è¾…åŠ©ç ”è¯»å±•å¼€
   ç•Œé¢ç®€æ´ï¼Œå‡å°‘å¹²æ‰°

âŒ¨ï¸ å¿«æ·é”®ï¼š
   â† â†’ åˆ‡æ¢ç« èŠ‚
   Ctrl+P æ˜¾ç¤º/éšè—æ³¨éŸ³
   Ctrl+F åˆ‡æ¢ä¸“æ³¨æ¨¡å¼
   Ctrl+S ä¿å­˜ç¬”è®°
   Ctrl+R éšæœºç« èŠ‚

ğŸ’¡ ä½¿ç”¨å»ºè®®ï¼š
   1. å…ˆé€šè¯»åŸæ–‡ï¼Œç†è§£å¤§æ„
   2. æŸ¥çœ‹ç”Ÿåƒ»å­—æ³¨éŸ³ï¼Œç¡®ä¿å‡†ç¡®è¯µè¯»
   3. é˜…è¯»æ ¸å¿ƒé‡Šä¹‰ï¼ŒåŠ æ·±ç†è§£
   4. æŒ‰ç…§èŠ‚å¥æ ‡è®°ç»ƒä¹ æœ—è¯»
   5. è®°å½•ä¸ªäººæ„Ÿæ‚Ÿå’Œç–‘é—®

ğŸ“± ç§»åŠ¨ç«¯ï¼š
   å®Œå…¨å“åº”å¼è®¾è®¡
   è§¦æ‘¸ä¼˜åŒ–ï¼Œæ“ä½œæµç•…
   ============================================
            `);
        }, 1500);
    </script>
</body>
</html>
